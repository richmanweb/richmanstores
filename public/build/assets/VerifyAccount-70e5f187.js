import{_ as k,u as C,c as V,r as p,e as P,a as I,m as c,b as m,d as L,f as l,o as i,g as a,h as r,w as h,i as t,t as o,l as d,j as q,F as D,k as F,n as A,p as f}from"./app-d918d935.js";const B={data:()=>({mobileInputProps:{inputOptions:{type:"tel",placeholder:"phone number"},dropdownOptions:{showDialCodeInSelection:!1,showFlags:!0,showDialCodeInList:!0},autoDefaultCountry:!1,validCharactersOnly:!0,mode:"international"},v$:C(),form:{email:"",phone:"",code:"",invalidPhone:!0,showInvalidPhone:!1},loading:!1,resendLoading:!1}),components:{VueTelInput:V},validations:{form:{email:{requiredIf:p(function(){return this.authSettings.customer_login_with=="email"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="email"}),email:P},phone:{requiredIf:p(function(){return this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="phone"})},code:{required:I}}},computed:{...c("auth",["authSettings"]),...c("app",["availableCountries"])},methods:{...m("auth",{actionLogin:"login"}),...L("auth",["updateChatWindow","showLoginDialog"]),...m("app",["fetchProductQuerries"]),...m("wishlist",["fetchWislistProducts"]),...m("cart",["fetchCartProducts"]),phoneValidate(e){this.form.invalidPhone=!e.valid,e.valid&&(this.form.showInvalidPhone=!1)},async verifyAccount(){if(!await this.v$.$validate())return;if((this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="phone")&&this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.form.phone=this.form.phone.replace(/\s/g,""),this.loading=!0;const s=await this.call_api("post","auth/verify",this.form);s.data.success?(this.actionLogin(s.data),this.showLoginDialog(!1),this.updateChatWindow(!1),this.fetchWislistProducts(),this.fetchProductQuerries(),this.fetchCartProducts(),this.$router.push(this.$route.query.redirect||{name:"DashBoard"})):this.snack({message:s.data.message,color:"red"}),this.loading=!1},async resendCode(){if(this.v$.form.email.$touch(),this.v$.form.email.$anyError)return;if((this.authSettings.customer_login_with=="phone"||this.authSettings.customer_login_with=="email_phone"&&this.authSettings.customer_otp_with=="phone")&&this.form.invalidPhone){this.form.showInvalidPhone=!0;return}this.form.phone=this.form.phone.replace(/\s/g,""),this.resendLoading=!0;const e=await this.call_api("post","auth/resend-code",this.form);e.data.success?this.snack({message:e.data.message}):this.snack({message:e.data.message,color:"red"}),this.resendLoading=!1}},created(){this.$route.params.email&&(this.form.email=this.$route.params.email),this.$route.params.phone&&(this.form.phone=this.$route.params.phone)}},N={class:"my-5 my-lg-16 rounded-lg pa-5 border overflow-hidden shadow-light"},W={key:0,class:"text-info mb-3"},z={key:1,class:"text-info mb-3"},E={class:"text-uppercase lh-1 mb-4 d-flex"},O={class:"display-1 text-primary fw-00"},U={class:"d-block display-1 fw-900 grey--text text--darken-3 ml-2"},M={key:2,class:"fs-16 fw-500 mb-6"},Q={key:3,class:"fs-16 fw-500 mb-6"},T={key:0,class:"mb-4"},j={class:"mb-1 fs-13 fw-500"},G={key:1,class:"mb-4"},H={class:"mb-1 fs-13 fw-500"},J={key:0,class:"v-text-field__details mt-2 pl-3"},K={class:"v-messages theme--light error--text",role:"alert"},R={class:"v-messages__wrapper"},X={class:"v-messages__message"},Y={key:1,class:"v-text-field__details mt-2 pl-3"},Z={class:"v-messages theme--light error--text",role:"alert"},x={class:"v-messages__wrapper"},ee={class:"v-messages__message"},te={class:"mb-4"},se={class:"mb-1 fs-13 fw-500"};function oe(e,s,ie,ae,ne,u){const g=l("v-text-field"),v=l("vue-tel-input"),w=l("v-otp-input"),_=l("v-btn"),y=l("v-form"),b=l("v-col"),$=l("v-row"),S=l("v-container");return i(),a("div",null,[r(S,null,{default:h(()=>[r($,null,{default:h(()=>[r(b,{cols:"12",lg:"6",md:"8",sm:"10",class:"mx-auto"},{default:h(()=>[t("div",N,[e.authSettings.customer_login_with=="email"||e.authSettings.customer_login_with=="email_phone"&&e.authSettings.customer_otp_with=="email"?(i(),a("div",W,o(e.$t("a_verification_code_has_been_sent_to_your_email")),1)):e.authSettings.customer_login_with=="phone"||e.authSettings.customer_login_with=="email_phone"&&e.authSettings.customer_otp_with=="phone"?(i(),a("div",z,o(e.$t("a_verification_code_has_been_sent_to_your_phone_number")),1)):d("",!0),t("h1",E,[t("span",O,o(e.$t("verify")),1),t("span",U,o(e.$t("account")),1)]),e.authSettings.customer_login_with=="email"||e.authSettings.customer_login_with=="email_phone"&&e.authSettings.customer_otp_with=="email"?(i(),a("div",M,o(e.$t("enter_your_email_address_verification_code")),1)):e.authSettings.customer_login_with=="phone"||e.authSettings.customer_login_with=="email_phone"&&e.authSettings.customer_otp_with=="phone"?(i(),a("div",Q,o(e.$t("enter_your_phone_number_verification_code")),1)):d("",!0),r(y,{ref:"loginForm","lazy-validation":"",onSubmit:s[3]||(s[3]=q(n=>u.verifyAccount(),["prevent"]))},{default:h(()=>[e.authSettings.customer_login_with=="email"||e.authSettings.customer_login_with=="email_phone"&&e.authSettings.customer_otp_with=="email"?(i(),a("div",T,[t("div",j,o(e.$t("email")),1),r(g,{variant:"plain",class:"text-field",modelValue:e.form.email,"onUpdate:modelValue":s[0]||(s[0]=n=>e.form.email=n),placeholder:e.$t("email_address"),type:"email","hide-details":"auto",required:"",outlined:""},null,8,["modelValue","placeholder"]),(i(!0),a(D,null,F(e.v$.form.email.$errors,n=>(i(),a("p",{key:n.$uid,class:"text-red"},o(n.$message),1))),128))])):d("",!0),e.authSettings.customer_login_with=="phone"||e.authSettings.customer_login_with=="email_phone"&&e.authSettings.customer_otp_with=="phone"?(i(),a("div",G,[t("div",H,o(e.$t("phone_number")),1),r(v,A({modelValue:e.form.phone,"onUpdate:modelValue":s[1]||(s[1]=n=>e.form.phone=n)},e.mobileInputProps,{"only-countries":e.availableCountries,onValidate:u.phoneValidate}),{"arrow-icon":h(()=>s[4]||(s[4]=[t("span",{class:"vti__dropdown-arrow"}," ▼",-1)])),_:1},16,["modelValue","only-countries","onValidate"]),e.v$.form.phone.$error?(i(),a("div",J,[t("div",K,[t("div",R,[t("div",X,o(e.$t("this_field_is_required")),1)])])])):d("",!0),!e.v$.form.phone.$error&&e.form.showInvalidPhone?(i(),a("div",Y,[t("div",Z,[t("div",x,[t("div",ee,o(e.$t("phone_number_must_be_valid")),1)])])])):d("",!0)])):d("",!0),t("div",te,[t("div",se,o(e.$t("code")),1),r(w,{modelValue:e.form.code,"onUpdate:modelValue":s[2]||(s[2]=n=>e.form.code=n),length:"6",type:"number","error-messages":e.codeErrors,"hide-details":"auto",disabled:e.loading,required:""},null,8,["modelValue","error-messages","disabled"])]),r(_,{size:"x-large",class:"px-12 mb-4 btn-primary",elevation:"0",type:"submit",loading:e.loading,disabled:e.loading,onClick:u.verifyAccount},{default:h(()=>[f(o(e.$t("verify")),1)]),_:1},8,["loading","disabled","onClick"]),r(_,{size:"x-large",class:"px-12 mb-4 ms-3",elevation:"0",type:"button",color:"grey-lighten-4",loading:e.resendLoading,disabled:e.resendLoading,onClick:u.resendCode},{default:h(()=>[f(o(e.$t("resend_code")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1},512)])]),_:1})]),_:1})]),_:1})])}const le=k(B,[["render",oe]]);export{le as default};
